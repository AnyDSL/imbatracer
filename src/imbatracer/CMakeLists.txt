add_library(imba_core
            core/adapter.h
            core/allocator.h
            core/bbox.h
            core/common.h
            core/float2.h
            core/float3.h
            core/float4.h
            core/gpu_adapter.cpp
            #core/cpu_adapter.cpp
            core/mem_pool.h
            core/mesh.h
            core/sbvh_builder.h
            core/tri.h)

add_library(imba_render
            render/image.h
            render/camera.h
            render/render.h
            render/integrator.h
            render/algo/pt.cpp
            render/algo/bpt.cpp
            #render/algo/vcm.cpp
            render/ray_queue.h
            render/random.h
            render/material.h
            render/scene.h
            render/thorin_mem.h
            render/texture_sampler.h)

add_executable(imbatracer
               frontend/main.cpp
               frontend/render_window.h
               frontend/render_window.cpp
               frontend/test_scene.h
               frontend/obj_loader.h
               frontend/obj_loader.cpp
               frontend/path.h
               frontend/logger.h
               frontend/texture_loader.h
               frontend/texture_loader.cpp)

target_link_libraries(imbatracer
                      imba_render
                      imba_core
                      ${SDL_LIBRARY}
                      ${PNG_LIBRARIES}
                      ${TRAVERSAL_LIBRARY}
                      ${THORIN_RUNTIME_LIBRARY}
                      ${THORIN_RUNTIME_LIBRARIES})
