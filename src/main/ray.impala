
struct Ray
{
    o : Point,
    d : Vec
}

fn ray(o : Point, d : Vec) -> Ray
{
    @assert(||almost(vlen(d), 1.0f), 13);
    Ray{ o:o, d:d }
}

fn ray0() -> Ray
{
    Ray{ o:point0(), d:vec0() }
}

fn rayNormalize(o : Point, d : Vec) -> Ray
{
    ray(o, normalize(d))
}

fn acc_rayNormalize(o : Point, d : Vec) -> Ray
{
    ray(o, acc_normalize(d))
}

fn rayP(r : Ray, dist : float) -> Point
{
    pvadd(r.o, vfmul(r.d, dist))
}


